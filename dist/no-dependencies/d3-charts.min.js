!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("d3-selection"),require("d3-array"),require("d3-scale"),require("d3-shape"),require("d3-transition"),require("d3-axis"),require("d3-collection")):"function"==typeof define&&define.amd?define(["d3-selection","d3-array","d3-scale","d3-shape","d3-transition","d3-axis","d3-collection"],e):t.d3=e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,e,n,a,r,i,o){"use strict";function c(t,e,n,a,r){var i=n.select("."+a);switch(i.empty()&&(i=n.append("g")),a){case"x-axis-g":var o=0;t.fixedAxis||t.layout.includes("horizontal")?o=e.height:t.layout.includes("vertical")&&(o=e.yScale(0)),i.attr("transform","translate(0, "+o+")").attr("class",a);break;case"y-axis-g":if(t.fixedAxis||t.layout.includes("vertical"))i.attr("class",a);else if(t.layout.includes("horizontal")){var c=e.xScale(0);i.attr("transform","translate("+c+", 0)").attr("class",a)}}return i.transition(e.transition).call(r).selectAll("g").delay(e.transitionDelay),i}function s(t,e,n){if(t.xAxisShow){var a=void 0;return a=t.xAxis?t.xAxis:i.axisBottom(e.xScale),c(t,e,n,"x-axis-g",a)}return[]}function l(t,e,n){if(t.yAxisShow){var a=void 0;return a=t.yAxis?t.yAxis:i.axisLeft(e.yScale),c(t,e,n,"y-axis-g",a)}return[]}function u(t){return"[object Object]"===Object.prototype.toString.call(t)}function d(t){if(null===t||"object"!==(void 0===t?"undefined":g(t)))return t;var e=t.constructor();return Object.keys(t).forEach(function(n){e[n]=d(t[n])}),e}function y(t,e){if(!u(t)||!u(e))throw new Error("extend only accepts objects");var n=d(t);return Object.keys(e).forEach(function(t){n[t]=e[t]}),n}var f={fixedAxis:!0,height:100,layout:"vertical",margin:{top:0,right:0,bottom:0,left:0},transitionDuration:600,transitionStepSeed:40,width:100,xAccessor:function(t){return t.x},xAxis:void 0,xAxisShow:!0,xDomain:void 0,yAccessor:function(t){return t.y},yAxis:void 0,yAxisShow:!0,yDomain:void 0},x={divergin:!1,quantitativeScaleType:"linear",stack:void 0,stackedKeys:void 0},m=function(t,e,n,a){var r=e.height,i=t.xAccessor,o=t.yAccessor,c=e.xScale,s=e.yScale,l=e.transition,u=e.transitionDelay,d=e.zScale,y=n.select(".bars-g");if(y.empty()&&(y=n.append("g").attr("class","bars-g")),"horizontal"===t.layout){var f=c(0),x=y.selectAll(".bar").data(a,o);x.exit().remove(),x.enter().append("rect").attr("class","bar").attr("x",f).attr("y",function(t){return s(o(t))}).merge(x).transition(l).attr("x",function(t){var e=i(t),n=c(e);return e>=0?f:n}).attr("width",function(t){var e=i(t),n=c(e);return e>=0?n-f:n+f}).attr("y",function(t){return s(o(t))}).attr("height",s.bandwidth()).delay(u)}else if("vertical"===t.layout){var m=s(0),g=y.selectAll(".bar").data(a,i);g.exit().remove(),g.enter().append("rect").attr("class","bar").attr("x",function(t){return c(i(t))}).attr("y",m).merge(g).transition(l).attr("x",function(t){return c(i(t))}).attr("width",c.bandwidth()).attr("y",function(t){var e=o(t),n=s(e);return e>=0?n:n-(r-m)}).attr("height",function(t){var e=o(t),n=s(e);return e>=0?r-n-(r-m):r-n+(r-m)}).delay(u)}else if("verticalStacked"===t.layout){var v=s(0),h=y.selectAll(".bars-g-nested").data(a);h.exit().remove();var p=h.enter().append("g").attr("class","bars-g-nested").attr("fill",function(t){return d&&d(t.key)}).merge(h).selectAll("rect").data(function(t){return t});p.exit().remove(),p.enter().append("rect").attr("x",function(t){return c(i(t.data))}).attr("width",c.bandwidth).attr("y",v).merge(p).transition(l).attr("x",function(t){return c(i(t.data))}).attr("width",c.bandwidth()).attr("y",function(t){return s(t[1])}).attr("height",function(t){return s(t[0])-s(t[1])}).delay(u)}return n},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v={clone:d,extend:y,getDefaultStackedKeys:function(t,e){return"horizontal"===t?Object.keys(e[0]).filter(function(t){return"y"!==t}):Object.keys(e[0]).filter(function(t){return"x"!==t})},getOrdinalBandScale:function(t,e){return n.scaleBand().rangeRound(e,.1).padding(.1).domain(t)},getQuantitativeScale:function(t,e,a){var r=void 0;switch(t){case"linear":r=n.scaleLinear();break;default:r=n.scaleLinear()}return r.range(a).domain(e)},getset:function(t,e){return o.entries(e).forEach(function(n){t[n.key]=function(a){return void 0===a?e[n.key]:(u(n.value)?e[n.key]=y(n.value,a):e[n.key]=a,t)}}),t},isObject:u,stackMax:function(t){return e.max(t,function(t){return t[1]})},stackMin:function(t){return e.min(t,function(t){return t[0]})}},h=function(t,e,n){var a=e.width,r=e.height,i=t.margin,o=n.select("svg");return o.empty()&&(o=n.append("svg").attr("width",a+i.left+i.right).attr("height",r+i.top+i.bottom).append("g").attr("transform","translate("+i.left+", "+i.top+")")),o},p={barChart:function(){function t(t){var o=t.datum(),c=i.height-i.margin.top-i.margin.bottom,u=i.width-i.margin.left-i.margin.right,d=void 0,y=function(t){var s=[0,u],l=[0,c],y=r.transition().duration(i.transitionDuration),f=function(t,e){return e*i.transitionStepSeed};switch(t){case"horizontal":var x=e.max(o,i.xAccessor),m=e.min(o,i.xAccessor),g=void 0!==i.xDomain?i.xDomain:[m<0?m:0,x],h=void 0!==i.yDomain?i.yDomain:o.map(i.yAccessor),p=v.getQuantitativeScale(i.quantitativeScaleType,g,s),S=v.getOrdinalBandScale(h,l);return d=o,{height:c,transition:y,transitionDelay:f,width:u,xDomain:g,xRange:s,xScale:p,yDomain:h,yRange:l,yScale:S,zScale:void 0};case"vertical":var b=e.max(o,i.yAccessor),D=e.min(o,i.yAccessor),A=void 0!==i.xDomain?i.xDomain:o.map(i.xAccessor),k=void 0!==i.yDomain?i.yDomain:[b,D<0?D:0],w=v.getOrdinalBandScale(A,s),O=v.getQuantitativeScale(i.quantitativeScaleType,k,l);return d=o,{height:c,transition:y,transitionDelay:f,width:u,xDomain:A,xRange:s,xScale:w,yDomain:k,yRange:l,yScale:O,zScale:void 0};case"verticalStacked":var j=i.stackedKeys||v.getDefaultStackedKeys(i.layout,o),q=i.divergin?a.stackOffsetDiverging:a.stackOrderAscending,z=a.stack().keys(j).offset(q)(o),R=void 0!==i.xDomain?i.xDomain:o.map(i.xAccessor),B=void 0!==i.yDomain?i.yDomain:[e.min(z,v.stackMin),e.max(z,v.stackMax)],E=v.getOrdinalBandScale(R,s),K=n.scaleLinear().domain(B).rangeRound([c,0]),L=n.scaleOrdinal(n.schemeCategory10);return d=z,{height:c,transition:y,transitionDelay:f,width:u,xDomain:R,xRange:s,xScale:E,yRange:l,yDomain:B,yScale:K,zScale:L};default:return d=o,{height:c,transition:y,transitionDelay:f,width:u,xDomain:[0,0],xRange:s,xScale:function(){},yRange:l,yDomain:[0,0],yScale:function(){},zScale:void 0}}}(i.layout),f=h(i,y,t);m(i,y,f,d),s(i,y,f),l(i,y,f)}var i=v.extend(f,x);return v.getset(t,i),t},components:{},helpers:v,select:t.select};return p.components.wrapper=h,p});